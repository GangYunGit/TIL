# 연관관계의 종류

## 다중성

- 다대일 : @ManyToOne

- 일대다 : @OneToMany

- 일대일 : @OneToOne

- 다대다 : @ManyToMany

## 단방향, 양방향

- 테이블
  - 외래 키 하나로 양쪽 조인 가능
  - 방향이라는 개념이 없음

- 객체
  - 참조용 필드가 있는 쪽으로만 참조 가능
  - 한쪽만 참조하면 단방향
  - 양쪽이 서로 참조하면 양방향

## 다대일 단방향

![image](https://user-images.githubusercontent.com/109258306/224048959-28014f70-266a-42ba-9a87-1b63848f6750.png)

![image](https://user-images.githubusercontent.com/109258306/224050218-bb04bf4b-b955-4c42-82ab-87581e61702c.png)

- 가장 많이 사용하는 연관관계

- 외래 키가 있는 곳에 참조를 걸고 연관관계 매핑을 한다.

## 다대일 양방향

![image](https://user-images.githubusercontent.com/109258306/224049653-48984e75-9298-4237-9fda-4d7cc3355ec0.png)

![image](https://user-images.githubusercontent.com/109258306/224050356-889e57e3-a60e-4f20-bbcc-f6c7dd2694fb.png)

## 일대다 단방향(권장하지 않음)

![image](https://user-images.githubusercontent.com/109258306/224051522-2a7e334f-2489-4931-83a2-2fafab798f15.png)

![image](https://user-images.githubusercontent.com/109258306/224053998-c432a7fc-ed27-4faa-9ae4-f1aaaf0a7409.png)

![image](https://user-images.githubusercontent.com/109258306/224054298-e41b230a-f09b-4a5b-a11b-bd3370122a2a.png)

- team 테이블에서는 member를 update시킬 방법이 없기 때문에 `member 테이블에 update 쿼리가 날아간다.`

- 연관관계의 주인은 일(1) 쪽, 그러나 테이블의 일대다 관계는 항상 다(N) 쪽에 외래 키가 있음 -> 객체와 테이블의 차이

- @JoinColumn을 꼭 사용해야함. 그렇지 않으면 조인 테이블 방식 사용

- 잘 안쓰는 이유?
  - 엔티티가 관리하는 외래 키가 다른 테이블에 있음
  - `연관관계 관리를 위해 추가로 UPDATE 쿼리를 실행`

- 일대다 단방향 매핑보다는 `다대일 양방향 매핑`을 사용하자!